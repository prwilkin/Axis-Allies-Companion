<!DOCTYPE html>
<html lang="en">
    <head>
        <title>SVG Viewer</title>
        <script type="text/javascript" src="qrc:///qtwebchannel/qwebchannel.js"></script>
    </head>
    <body>
        <object id="svgObject" type="image/svg+xml" data="board/board.svg"></object>
        <script>
            window.onload = function() {
                console.log("load script");
                var svgObject = document.getElementById('svgObject');
                setTimeout(function() {
                    var svgDoc = svgObject.contentDocument;
                    var svgItems = svgDoc.getElementsByTagName("*");
                    console.log("Adding click listeners to " + svgItems.length + " items.");
                    for (var i = 0; i < svgItems.length; i++) {
                        svgItems[i].addEventListener("click", function(event) {
                            console.log("Clicked on element with ID: " + event.target.id);
                            // TODO: Send the ID to the Python backend
                            new QWebChannel(qt.webChannelTransport, function (channel) {
                                var myObj = channel.objects.myObj;
                                myObj.receiveId(event.target.id);
                            });
                        });
                    }
                }, 1000); // Adjust the timeout as needed
            };
        </script>
    </body>
</html>
